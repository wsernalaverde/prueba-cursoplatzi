{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["'use strict';\n\nvar _regenerator = require('babel-runtime/regenerator');\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _asyncToGenerator2 = require('babel-runtime/helpers/asyncToGenerator');\n\nvar _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);\n\nvar _ava = require('ava');\n\nvar _ava2 = _interopRequireDefault(_ava);\n\nvar _lib = require('../lib/');\n\nvar _requestPromise = require('request-promise');\n\nvar _requestPromise2 = _interopRequireDefault(_requestPromise);\n\nvar _listen = require('./_listen');\n\nvar _listen2 = _interopRequireDefault(_listen);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n(0, _ava2.default)('import json', function (t) {\n  t.ok(_lib.json);\n});\n\n(0, _ava2.default)('send(200, <String>)', function () {\n  var ref = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee2(t) {\n    var fn, url, res;\n    return _regenerator2.default.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            fn = function () {\n              var ref = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee(req, res) {\n                return _regenerator2.default.wrap(function _callee$(_context) {\n                  while (1) {\n                    switch (_context.prev = _context.next) {\n                      case 0:\n                        (0, _lib.send)(res, 200, 'woot');\n\n                      case 1:\n                      case 'end':\n                        return _context.stop();\n                    }\n                  }\n                }, _callee, undefined);\n              })),\n                  _this = undefined;\n              return function fn(_x2, _x3) {\n                return ref.apply(_this, arguments);\n              };\n            }();\n\n            _context2.next = 3;\n            return (0, _listen2.default)(fn);\n\n          case 3:\n            url = _context2.sent;\n            _context2.next = 6;\n            return (0, _requestPromise2.default)(url);\n\n          case 6:\n            res = _context2.sent;\n\n            t.same(res, 'woot');\n\n          case 8:\n          case 'end':\n            return _context2.stop();\n        }\n      }\n    }, _callee2, undefined);\n  })),\n      _this = undefined;\n  return function (_x) {\n    return ref.apply(_this, arguments);\n  };\n}());\n\n(0, _ava2.default)('send(200, <Object>)', function () {\n  var ref = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee4(t) {\n    var fn, url, res;\n    return _regenerator2.default.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            fn = function () {\n              var ref = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee3(req, res) {\n                return _regenerator2.default.wrap(function _callee3$(_context3) {\n                  while (1) {\n                    switch (_context3.prev = _context3.next) {\n                      case 0:\n                        (0, _lib.send)(res, 200, { a: 'b' });\n\n                      case 1:\n                      case 'end':\n                        return _context3.stop();\n                    }\n                  }\n                }, _callee3, undefined);\n              })),\n                  _this = undefined;\n              return function fn(_x5, _x6) {\n                return ref.apply(_this, arguments);\n              };\n            }();\n\n            _context4.next = 3;\n            return (0, _listen2.default)(fn);\n\n          case 3:\n            url = _context4.sent;\n            _context4.next = 6;\n            return (0, _requestPromise2.default)(url, { json: true });\n\n          case 6:\n            res = _context4.sent;\n\n            t.same(res, { a: 'b' });\n\n          case 8:\n          case 'end':\n            return _context4.stop();\n        }\n      }\n    }, _callee4, undefined);\n  })),\n      _this = undefined;\n  return function (_x4) {\n    return ref.apply(_this, arguments);\n  };\n}());\n\n_ava2.default.only('send(<Number>)', function () {\n  var ref = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee6(t) {\n    var fn, url;\n    return _regenerator2.default.wrap(function _callee6$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            fn = function () {\n              var ref = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee5(req, res) {\n                return _regenerator2.default.wrap(function _callee5$(_context5) {\n                  while (1) {\n                    switch (_context5.prev = _context5.next) {\n                      case 0:\n                        (0, _lib.send)(res, 404);\n\n                      case 1:\n                      case 'end':\n                        return _context5.stop();\n                    }\n                  }\n                }, _callee5, undefined);\n              })),\n                  _this = undefined;\n              return function fn(_x8, _x9) {\n                return ref.apply(_this, arguments);\n              };\n            }();\n\n            _context6.next = 3;\n            return (0, _listen2.default)(fn);\n\n          case 3:\n            url = _context6.sent;\n            _context6.prev = 4;\n            _context6.next = 7;\n            return (0, _requestPromise2.default)(url, { json: true });\n\n          case 7:\n            _context6.next = 12;\n            break;\n\n          case 9:\n            _context6.prev = 9;\n            _context6.t0 = _context6['catch'](4);\n\n            t.same(_context6.t0.statusCode, 400);\n\n          case 12:\n          case 'end':\n            return _context6.stop();\n        }\n      }\n    }, _callee6, undefined, [[4, 9]]);\n  })),\n      _this = undefined;\n  return function (_x7) {\n    return ref.apply(_this, arguments);\n  };\n}());\n\n// test only code send\n// test manual httpCode error\n// test manual 500 error\n// test onError callback\n// test json parse error\n// test request error (?)"]}